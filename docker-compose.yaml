services:
  cosmo-router:
    image: ghcr.io/wundergraph/cosmo/router:latest
    container_name: cosmo-router
    #restart: unless-stopped
    ports:
      - "3002:3002"
    environment:
      DEV_MODE: "true"
      LISTEN_ADDR: "0.0.0.0:3002"
      #GRAPH_API_TOKEN: "<graph-api-token>" # 🔁 Zastąp własnym tokenem lub użyj zmiennej
    extra_hosts:
      - "host.docker.internal:host-gateway"
    pull_policy: always
    command:
      - /app/cosmo-router
      - --supergraph
      - /etc/cosmo/supergraph.graphql
      - --listen
      - 0.0.0.0:3002
    volumes:
      - ./supergraph.graphql:/etc/cosmo/supergraph.graphql:ro

